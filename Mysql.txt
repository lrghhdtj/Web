 create table user(
    id int primary key auto_increment,
    username varchar(20) not null ,
    password varchar(20) not null 
);

create table quiz(
    id int primary key auto_increment,
    title varchar(20),
    description varchar(35),
    data text,
    question text,
    solution text,
    analysis text,
    style varchar(15)
);

create table collection(
    id int primary key auto_increment,
    userid int not null ,
    quizid int not null,
    CONSTRAINT `fk_collection_userid`  FOREIGN KEY(userid) REFERENCES user(id),
    CONSTRAINT `fk_collection_quizid` FOREIGN KEY(quizid) REFERENCES quiz(id)
);


create table commemt(
    id int primary key auto_increment,
    username varchar(20) not null ,
    comment text not null ,
    goal int not null ,
    createtime datetime not null,
    userid int not null ,
    quizid int not null ,
	CONSTRAINT `fk_comment_userid`  FOREIGN KEY(userid) REFERENCES user(id),
    CONSTRAINT `fk_comment_quizid` FOREIGN KEY(quizid) REFERENCES quiz(id)
	);
	DELIMITER $$
		create trigger trigger_top after insert on web.comment for each row
		begin
		declare num int ;
		declare s float ;
		declare t int ;
		set num = (select count(*) from web.top where quizid = new.id);
		if (num = 0) then
		 insert into web.top (score,total,quizid) values (new.goal,1,new.quizid);
		 else
         begin
         set s = (select score from web.top where quizid = new.id );
         set t = (select total from web.top where quizid = new.id);
         update web.top set score = 
         end;
		 end if;

		end;
	DELIMITER ; 
